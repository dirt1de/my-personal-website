---
title: Legendary pokemon classification
author: Xuxin Zhang
date: '2020-09-09'
slug: legendary-pokemon
categories:
  - R project
tags:
  - data analysis
  - data visualization
  - R
  - tidymodel
  - machine learning
subtitle: ''
summary: ''
authors: []
lastmod: '2020-09-09T21:32:31+08:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/plotly-binding/plotly.js"></script>
<script src="/rmarkdown-libs/typedarray/typedarray.min.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>
<link href="/rmarkdown-libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="/rmarkdown-libs/plotly-main/plotly-latest.min.js"></script>


<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>In this project, we will explore the pokemon data. The focus is to develope a machine learning model to predict whether a pokemon is legendary or not. If you have watched the Pokemon animes or played pokemon games, you will know that legendary pokemons are really powerful, rare, and hard (almost impossible) to get. In our project, we hope to discover other characteristics of legendary pokemons so that we could accurately predict if a given pokemon is legendary.</p>
</div>
<div id="data-wranggling" class="section level2">
<h2>Data wranggling</h2>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ────────────────────────────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.2     ✓ purrr   0.3.4
## ✓ tibble  3.0.3     ✓ dplyr   1.0.0
## ✓ tidyr   1.1.0     ✓ stringr 1.4.0
## ✓ readr   1.3.1     ✓ forcats 0.5.0</code></pre>
<pre><code>## ── Conflicts ───────────────────────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(tidymodels)</code></pre>
<pre><code>## ── Attaching packages ───────────────────────────────────────────────────────── tidymodels 0.1.1 ──</code></pre>
<pre><code>## ✓ broom     0.7.0      ✓ recipes   0.1.13
## ✓ dials     0.0.8      ✓ rsample   0.0.7 
## ✓ infer     0.5.3      ✓ tune      0.1.1 
## ✓ modeldata 0.0.2      ✓ workflows 0.1.3 
## ✓ parsnip   0.1.3      ✓ yardstick 0.0.7</code></pre>
<pre><code>## ── Conflicts ──────────────────────────────────────────────────────────── tidymodels_conflicts() ──
## x scales::discard() masks purrr::discard()
## x dplyr::filter()   masks stats::filter()
## x recipes::fixed()  masks stringr::fixed()
## x dplyr::lag()      masks stats::lag()
## x yardstick::spec() masks readr::spec()
## x recipes::step()   masks stats::step()</code></pre>
<pre class="r"><code>pokemon &lt;- read_csv(&quot;/Users/xuxian/Documents/UCLA related/R/website/my-personal-website/content/post/legendar-pokemon/pokemon.csv&quot;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_double(),
##   Name = col_character(),
##   Type_1 = col_character(),
##   Type_2 = col_character(),
##   isLegendary = col_logical(),
##   Color = col_character(),
##   hasGender = col_logical(),
##   Egg_Group_1 = col_character(),
##   Egg_Group_2 = col_character(),
##   hasMegaEvolution = col_logical(),
##   Body_Style = col_character()
## )</code></pre>
<pre><code>## See spec(...) for full column specifications.</code></pre>
<pre class="r"><code>pokemon</code></pre>
<pre><code>## # A tibble: 721 x 23
##    Number Name  Type_1 Type_2 Total    HP Attack Defense Sp_Atk Sp_Def Speed
##     &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
##  1      1 Bulb… Grass  Poison   318    45     49      49     65     65    45
##  2      2 Ivys… Grass  Poison   405    60     62      63     80     80    60
##  3      3 Venu… Grass  Poison   525    80     82      83    100    100    80
##  4      4 Char… Fire   &lt;NA&gt;     309    39     52      43     60     50    65
##  5      5 Char… Fire   &lt;NA&gt;     405    58     64      58     80     65    80
##  6      6 Char… Fire   Flying   534    78     84      78    109     85   100
##  7      7 Squi… Water  &lt;NA&gt;     314    44     48      65     50     64    43
##  8      8 Wart… Water  &lt;NA&gt;     405    59     63      80     65     80    58
##  9      9 Blas… Water  &lt;NA&gt;     530    79     83     100     85    105    78
## 10     10 Cate… Bug    &lt;NA&gt;     195    45     30      35     20     20    45
## # … with 711 more rows, and 12 more variables: Generation &lt;dbl&gt;,
## #   isLegendary &lt;lgl&gt;, Color &lt;chr&gt;, hasGender &lt;lgl&gt;, Pr_Male &lt;dbl&gt;,
## #   Egg_Group_1 &lt;chr&gt;, Egg_Group_2 &lt;chr&gt;, hasMegaEvolution &lt;lgl&gt;,
## #   Height_m &lt;dbl&gt;, Weight_kg &lt;dbl&gt;, Catch_Rate &lt;dbl&gt;, Body_Style &lt;chr&gt;</code></pre>
<p>If you look at the data, you will probably notice that some of the pokemons have two types. Since types could a potential indicator of legendary pokemons, we need to clean the Type_1 and Type_2 columns.</p>
<pre class="r"><code>pokemon_new &lt;-pokemon%&gt;%gather(Type, type_value, Type_1,Type_2)</code></pre>
<p>Notice that in the code below, we deselect the Egg group and hasMegaEvolution. Mega evolution is quite new concept in pokemon anime/ game. It may not be applied to pokemons in early generations.</p>
<pre class="r"><code>pokemon_new_1&lt;-pokemon_new%&gt;%select(-Egg_Group_1,-Egg_Group_2,-Type,-hasMegaEvolution)

pokemon_df&lt;-pokemon_new_1[complete.cases(pokemon_new_1$type_value),]

pokemon_df$Generation&lt;-factor(pokemon_df$Generation)


colors &lt;- c(&quot;#593420&quot;,&quot;#080c26&quot;,&quot;#7d8228&quot;, &quot;#e2dc2f&quot;,&quot;#fcdefb&quot;,&quot;#662714&quot;,&quot;#c91f01&quot;,&quot;#d0edef&quot;,&quot;#7f7682&quot;,&quot;#2d6633&quot;,&quot;#5b5550&quot;,&quot;#8dd9f4&quot;,&quot;#e0e0e0&quot;,&quot;#126347&quot;,&quot;#4a116b&quot;,&quot;#332f28&quot;,&quot;#bababa&quot;,&quot;#203bc1&quot;)</code></pre>
<p>After finishing the data cleaning, we are ready to explore our data.</p>
</div>
<div id="data-exploratory-analysis" class="section level2">
<h2>Data exploratory analysis</h2>
<div id="distribution-of-legendary-pokemons" class="section level3">
<h3>Distribution of legendary pokemons</h3>
<p>First, we can study the distribution of the number of legendary pokemons. For example, we can try to find out how the number of legendary pokemon changes through generations.</p>
<pre class="r"><code>library(plotly)</code></pre>
<pre><code>## Warning: package &#39;plotly&#39; was built under R version 4.0.2</code></pre>
<pre><code>## 
## Attaching package: &#39;plotly&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     last_plot</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     filter</code></pre>
<pre><code>## The following object is masked from &#39;package:graphics&#39;:
## 
##     layout</code></pre>
<pre class="r"><code>ggplotly(pokemon_df%&gt;%count(Generation, isLegendary)%&gt;%ggplot(aes(x = Generation, y = n, fill = isLegendary))+geom_col(position = &quot;dodge&quot;)+ scale_fill_brewer(palette = &quot;Paired&quot;)+labs(title = &quot;Distribution of legendary pokemons across generations&quot;,fill = &quot;Legendary&quot;))</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"data":[{"orientation":"v","width":[0.45,0.45,0.45,0.45,0.449999999999999,0.449999999999999],"base":[0,0,0,0,0,0],"x":[0.775,1.775,2.775,3.775,4.775,5.775],"y":[211,142,187,145,211,102],"text":["Generation: 1<br />n: 211<br />isLegendary: FALSE","Generation: 2<br />n: 142<br />isLegendary: FALSE","Generation: 3<br />n: 187<br />isLegendary: FALSE","Generation: 4<br />n: 145<br />isLegendary: FALSE","Generation: 5<br />n: 211<br />isLegendary: FALSE","Generation: 6<br />n: 102<br />isLegendary: FALSE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(166,206,227,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"FALSE","legendgroup":"FALSE","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.45,0.45,0.45,0.45,0.449999999999999,0.449999999999999],"base":[0,0,0,0,0,0],"x":[1.225,2.225,3.225,4.225,5.225,6.225],"y":[7,7,14,15,19,11],"text":["Generation: 1<br />n:   7<br />isLegendary:  TRUE","Generation: 2<br />n:   7<br />isLegendary:  TRUE","Generation: 3<br />n:  14<br />isLegendary:  TRUE","Generation: 4<br />n:  15<br />isLegendary:  TRUE","Generation: 5<br />n:  19<br />isLegendary:  TRUE","Generation: 6<br />n:  11<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(31,120,180,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"TRUE","legendgroup":"TRUE","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Distribution of legendary pokemons across generations","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["1","2","3","4","5","6"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["1","2","3","4","5","6"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Generation","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-10.55,221.55],"tickmode":"array","ticktext":["0","50","100","150","200"],"tickvals":[0,50,100,150,200],"categoryorder":"array","categoryarray":["0","50","100","150","200"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"n","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.913385826771654},"annotations":[{"text":"Legendary","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"6c416a31a9ee":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"6c416a31a9ee","visdat":{"6c416a31a9ee":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Based on this graph, we could see that the legendary pokemons are qiute rare in the first two generations. The number of newly created legendary pokemons spikes at the fifth generation. If we compare the number of legendary and non-legendary pokemons, we will know that our initial assumption about the rarity of legendary pokemons does hold.</p>
<p>Speaking of generation, we can study how the type of pokemons is composed in different generations.</p>
<pre class="r"><code>ggplotly(pokemon_df%&gt;%count(type_value,Generation, sort = TRUE)%&gt;%ggplot(aes(x = n, y = reorder(type_value, n), fill = Generation))+geom_col()+ scale_fill_brewer(palette = &quot;Paired&quot;)+labs(title = &quot;Number of different types in each generation&quot;,y = &quot;Types&quot;, fill = &quot;Generation&quot;))</code></pre>
<div id="htmlwidget-2" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"data":[{"orientation":"v","width":[33,32,22,19,14,14,14,12,12,11,9,8,5,5,3,3,2],"base":[10.55,17.55,16.55,15.55,14.55,11.55,13.55,12.55,9.55,8.55,5.55,6.55,1.55,0.55,3.55,2.55,4.55],"x":[42.5,102,86,80.5,77,53,67,60,50,49.5,37.5,40,32.5,30.5,36.5,33.5,40],"y":[0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.9,0.9,0.9,0.9,0.9,0.9],"text":["n: 33<br />reorder(type_value, n): Poison<br />Generation: 1","n: 32<br />reorder(type_value, n): Water<br />Generation: 1","n: 22<br />reorder(type_value, n): Normal<br />Generation: 1","n: 19<br />reorder(type_value, n): Flying<br />Generation: 1","n: 14<br />reorder(type_value, n): Grass<br />Generation: 1","n: 14<br />reorder(type_value, n): Ground<br />Generation: 1","n: 14<br />reorder(type_value, n): Psychic<br />Generation: 1","n: 12<br />reorder(type_value, n): Bug<br />Generation: 1","n: 12<br />reorder(type_value, n): Fire<br />Generation: 1","n: 11<br />reorder(type_value, n): Rock<br />Generation: 1","n:  9<br />reorder(type_value, n): Electric<br />Generation: 1","n:  8<br />reorder(type_value, n): Fighting<br />Generation: 1","n:  5<br />reorder(type_value, n): Fairy<br />Generation: 1","n:  5<br />reorder(type_value, n): Ice<br />Generation: 1","n:  3<br />reorder(type_value, n): Dragon<br />Generation: 1","n:  3<br />reorder(type_value, n): Ghost<br />Generation: 1","n:  2<br />reorder(type_value, n): Steel<br />Generation: 1"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(166,206,227,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[19,18,15,10,10,10,10,10,8,8,7,6,5,4,4,3,1,1],"base":[15.55,17.55,16.55,12.55,9.55,14.55,11.55,13.55,5.55,1.55,8.55,7.55,0.55,10.55,4.55,6.55,3.55,2.55],"x":[61.5,77,67.5,49,39,65,41,55,29,26,40.5,41,25.5,24,37,34.5,34.5,31.5],"y":[0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.9,0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.9,0.9,0.9,0.9],"text":["n: 19<br />reorder(type_value, n): Flying<br />Generation: 2","n: 18<br />reorder(type_value, n): Water<br />Generation: 2","n: 15<br />reorder(type_value, n): Normal<br />Generation: 2","n: 10<br />reorder(type_value, n): Bug<br />Generation: 2","n: 10<br />reorder(type_value, n): Fire<br />Generation: 2","n: 10<br />reorder(type_value, n): Grass<br />Generation: 2","n: 10<br />reorder(type_value, n): Ground<br />Generation: 2","n: 10<br />reorder(type_value, n): Psychic<br />Generation: 2","n:  8<br />reorder(type_value, n): Electric<br />Generation: 2","n:  8<br />reorder(type_value, n): Fairy<br />Generation: 2","n:  7<br />reorder(type_value, n): Rock<br />Generation: 2","n:  6<br />reorder(type_value, n): Dark<br />Generation: 2","n:  5<br />reorder(type_value, n): Ice<br />Generation: 2","n:  4<br />reorder(type_value, n): Poison<br />Generation: 2","n:  4<br />reorder(type_value, n): Steel<br />Generation: 2","n:  3<br />reorder(type_value, n): Fighting<br />Generation: 2","n:  1<br />reorder(type_value, n): Dragon<br />Generation: 2","n:  1<br />reorder(type_value, n): Ghost<br />Generation: 2"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(31,120,180,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[28,20,18,17,14,13,12,12,10,9,9,7,6,6,6,5,5,4],"base":[17.55,13.55,16.55,14.55,12.55,11.55,15.55,8.55,7.55,3.55,4.55,6.55,9.55,2.55,0.55,1.55,10.55,5.55],"x":[54,40,51,51.5,37,29.5,46,31,33,29.5,30.5,29.5,31,28,20,19.5,19.5,23],"y":[0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.9,0.9,0.899999999999999,0.9,0.9,0.9,0.899999999999999,0.9],"text":["n: 28<br />reorder(type_value, n): Water<br />Generation: 3","n: 20<br />reorder(type_value, n): Psychic<br />Generation: 3","n: 18<br />reorder(type_value, n): Normal<br />Generation: 3","n: 17<br />reorder(type_value, n): Grass<br />Generation: 3","n: 14<br />reorder(type_value, n): Bug<br />Generation: 3","n: 13<br />reorder(type_value, n): Ground<br />Generation: 3","n: 12<br />reorder(type_value, n): Flying<br />Generation: 3","n: 12<br />reorder(type_value, n): Rock<br />Generation: 3","n: 10<br />reorder(type_value, n): Dark<br />Generation: 3","n:  9<br />reorder(type_value, n): Dragon<br />Generation: 3","n:  9<br />reorder(type_value, n): Steel<br />Generation: 3","n:  7<br />reorder(type_value, n): Fighting<br />Generation: 3","n:  6<br />reorder(type_value, n): Fire<br />Generation: 3","n:  6<br />reorder(type_value, n): Ghost<br />Generation: 3","n:  6<br />reorder(type_value, n): Ice<br />Generation: 3","n:  5<br />reorder(type_value, n): Fairy<br />Generation: 3","n:  5<br />reorder(type_value, n): Poison<br />Generation: 3","n:  4<br />reorder(type_value, n): Electric<br />Generation: 3"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(178,223,138,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[17,14,14,14,10,10,9,9,8,8,7,7,7,7,6,6,5,2],"base":[16.55,15.55,14.55,17.55,11.55,4.55,12.55,13.55,2.55,10.55,7.55,5.55,6.55,8.55,3.55,0.55,9.55,1.55],"x":[33.5,33,36,33,18,21,25.5,25.5,21,13,24.5,17.5,22.5,21.5,22,14,25.5,16],"y":[0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.899999999999999,0.9,0.9,0.899999999999999,0.9,0.9,0.899999999999999,0.9],"text":["n: 17<br />reorder(type_value, n): Normal<br />Generation: 4","n: 14<br />reorder(type_value, n): Flying<br />Generation: 4","n: 14<br />reorder(type_value, n): Grass<br />Generation: 4","n: 14<br />reorder(type_value, n): Water<br />Generation: 4","n: 10<br />reorder(type_value, n): Ground<br />Generation: 4","n: 10<br />reorder(type_value, n): Steel<br />Generation: 4","n:  9<br />reorder(type_value, n): Bug<br />Generation: 4","n:  9<br />reorder(type_value, n): Psychic<br />Generation: 4","n:  8<br />reorder(type_value, n): Ghost<br />Generation: 4","n:  8<br />reorder(type_value, n): Poison<br />Generation: 4","n:  7<br />reorder(type_value, n): Dark<br />Generation: 4","n:  7<br />reorder(type_value, n): Electric<br />Generation: 4","n:  7<br />reorder(type_value, n): Fighting<br />Generation: 4","n:  7<br />reorder(type_value, n): Rock<br />Generation: 4","n:  6<br />reorder(type_value, n): Dragon<br />Generation: 4","n:  6<br />reorder(type_value, n): Ice<br />Generation: 4","n:  5<br />reorder(type_value, n): Fire<br />Generation: 4","n:  2<br />reorder(type_value, n): Fairy<br />Generation: 4"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(51,160,44,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[20,18,18,17,17,16,15,15,15,12,11,11,10,10,9,7,7,2],"base":[14.55,12.55,15.55,16.55,17.55,7.55,6.55,9.55,13.55,4.55,5.55,11.55,3.55,8.55,2.55,0.55,10.55,1.55],"x":[19,12,17,16.5,17.5,13,11.5,15.5,13.5,10,8.5,7.5,14,13,12.5,7.5,5.5,14],"y":[0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.899999999999999,0.9,0.9,0.899999999999999,0.9,0.899999999999999,0.9,0.9,0.899999999999999,0.9],"text":["n: 20<br />reorder(type_value, n): Grass<br />Generation: 5","n: 18<br />reorder(type_value, n): Bug<br />Generation: 5","n: 18<br />reorder(type_value, n): Flying<br />Generation: 5","n: 17<br />reorder(type_value, n): Normal<br />Generation: 5","n: 17<br />reorder(type_value, n): Water<br />Generation: 5","n: 16<br />reorder(type_value, n): Dark<br />Generation: 5","n: 15<br />reorder(type_value, n): Fighting<br />Generation: 5","n: 15<br />reorder(type_value, n): Fire<br />Generation: 5","n: 15<br />reorder(type_value, n): Psychic<br />Generation: 5","n: 12<br />reorder(type_value, n): Steel<br />Generation: 5","n: 11<br />reorder(type_value, n): Electric<br />Generation: 5","n: 11<br />reorder(type_value, n): Ground<br />Generation: 5","n: 10<br />reorder(type_value, n): Dragon<br />Generation: 5","n: 10<br />reorder(type_value, n): Rock<br />Generation: 5","n:  9<br />reorder(type_value, n): Ghost<br />Generation: 5","n:  7<br />reorder(type_value, n): Ice<br />Generation: 5","n:  7<br />reorder(type_value, n): Poison<br />Generation: 5","n:  2<br />reorder(type_value, n): Fairy<br />Generation: 5"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(251,154,153,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"5","legendgroup":"5","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[13,9,9,9,8,8,8,8,8,6,5,4,4,4,3,3,2,2],"base":[1.55,3.55,14.55,17.55,9.55,15.55,2.55,16.55,8.55,13.55,7.55,6.55,0.55,4.55,12.55,5.55,11.55,10.55],"x":[6.5,4.5,4.5,4.5,4,4,4,4,4,3,2.5,2,2,2,1.5,1.5,1,1],"y":[0.9,0.9,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.9,0.9,0.899999999999999,0.9,0.899999999999999,0.899999999999999],"text":["n: 13<br />reorder(type_value, n): Fairy<br />Generation: 6","n:  9<br />reorder(type_value, n): Dragon<br />Generation: 6","n:  9<br />reorder(type_value, n): Grass<br />Generation: 6","n:  9<br />reorder(type_value, n): Water<br />Generation: 6","n:  8<br />reorder(type_value, n): Fire<br />Generation: 6","n:  8<br />reorder(type_value, n): Flying<br />Generation: 6","n:  8<br />reorder(type_value, n): Ghost<br />Generation: 6","n:  8<br />reorder(type_value, n): Normal<br />Generation: 6","n:  8<br />reorder(type_value, n): Rock<br />Generation: 6","n:  6<br />reorder(type_value, n): Psychic<br />Generation: 6","n:  5<br />reorder(type_value, n): Dark<br />Generation: 6","n:  4<br />reorder(type_value, n): Fighting<br />Generation: 6","n:  4<br />reorder(type_value, n): Ice<br />Generation: 6","n:  4<br />reorder(type_value, n): Steel<br />Generation: 6","n:  3<br />reorder(type_value, n): Bug<br />Generation: 6","n:  3<br />reorder(type_value, n): Electric<br />Generation: 6","n:  2<br />reorder(type_value, n): Ground<br />Generation: 6","n:  2<br />reorder(type_value, n): Poison<br />Generation: 6"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(227,26,28,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"6","legendgroup":"6","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":72.3287671232877},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Number of different types in each generation","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-5.9,123.9],"tickmode":"array","ticktext":["0","30","60","90","120"],"tickvals":[0,30,60,90,120],"categoryorder":"array","categoryarray":["0","30","60","90","120"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"n","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,18.6],"tickmode":"array","ticktext":["Ice","Fairy","Ghost","Dragon","Steel","Electric","Fighting","Dark","Rock","Fire","Poison","Ground","Bug","Psychic","Grass","Flying","Normal","Water"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],"categoryorder":"array","categoryarray":["Ice","Fairy","Ghost","Dragon","Steel","Electric","Fighting","Dark","Rock","Fire","Poison","Ground","Bug","Psychic","Grass","Flying","Normal","Water"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Types","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.913385826771654},"annotations":[{"text":"Generation","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"6c41217be5e":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"6c41217be5e","visdat":{"6c41217be5e":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>In this graph, we can see that how many pokemons of each type are there. In addition, most pokemons are created during the first generation and fifth generation.</p>
<p>Next, we could try to take a look at the number of legendary pokemons in different types since type could be a potential indicator.</p>
<pre class="r"><code>ggplotly(pokemon_df%&gt;%ggplot(aes(x = isLegendary))+geom_bar(aes(fill = type_value), show.legend = FALSE)+facet_wrap(~type_value, scales = &quot;free_y&quot;)+scale_fill_manual(values=as.character(colors))+labs(x=&quot;Legendary&quot;, y = &quot;Count&quot;, fill = &quot;Type&quot;, title = &quot;Distribution of legendary pokemons in each type&quot;))</code></pre>
<pre><code>## Warning: `group_by_()` is deprecated as of dplyr 0.7.0.
## Please use `group_by()` instead.
## See vignette(&#39;programming&#39;) for more help
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_warnings()` to see where this warning was generated.</code></pre>
<div id="htmlwidget-3" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"data":[{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[66],"text":"count:  66<br />type_value: Bug<br />isLegendary: FALSE","type":"bar","marker":{"autocolorscale":false,"color":"rgba(89,52,32,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Bug","legendgroup":"Bug","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[42,2],"text":["count:  42<br />type_value: Dark<br />isLegendary: FALSE","count:   2<br />type_value: Dark<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(8,12,38,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Dark","legendgroup":"Dark","showlegend":true,"xaxis":"x2","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[28,10],"text":["count:  28<br />type_value: Dragon<br />isLegendary: FALSE","count:  10<br />type_value: Dragon<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(125,130,40,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Dragon","legendgroup":"Dragon","showlegend":true,"xaxis":"x3","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[38,4],"text":["count:  38<br />type_value: Electric<br />isLegendary: FALSE","count:   4<br />type_value: Electric<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(226,220,47,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Electric","legendgroup":"Electric","showlegend":true,"xaxis":"x4","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[33,2],"text":["count:  33<br />type_value: Fairy<br />isLegendary: FALSE","count:   2<br />type_value: Fairy<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(252,222,251,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Fairy","legendgroup":"Fairy","showlegend":true,"xaxis":"x5","yaxis":"y5","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[41,3],"text":["count:  41<br />type_value: Fighting<br />isLegendary: FALSE","count:   3<br />type_value: Fighting<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(102,39,20,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Fighting","legendgroup":"Fighting","showlegend":true,"xaxis":"x","yaxis":"y6","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[49,7],"text":["count:  49<br />type_value: Fire<br />isLegendary: FALSE","count:   7<br />type_value: Fire<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(201,31,1,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Fire","legendgroup":"Fire","showlegend":true,"xaxis":"x2","yaxis":"y7","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[80,10],"text":["count:  80<br />type_value: Flying<br />isLegendary: FALSE","count:  10<br />type_value: Flying<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(208,237,239,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Flying","legendgroup":"Flying","showlegend":true,"xaxis":"x3","yaxis":"y8","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[33,2],"text":["count:  33<br />type_value: Ghost<br />isLegendary: FALSE","count:   2<br />type_value: Ghost<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(127,118,130,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Ghost","legendgroup":"Ghost","showlegend":true,"xaxis":"x4","yaxis":"y9","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[82,2],"text":["count:  82<br />type_value: Grass<br />isLegendary: FALSE","count:   2<br />type_value: Grass<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(45,102,51,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Grass","legendgroup":"Grass","showlegend":true,"xaxis":"x5","yaxis":"y10","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[57,3],"text":["count:  57<br />type_value: Ground<br />isLegendary: FALSE","count:   3<br />type_value: Ground<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(91,85,80,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Ground","legendgroup":"Ground","showlegend":true,"xaxis":"x","yaxis":"y11","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[30,3],"text":["count:  30<br />type_value: Ice<br />isLegendary: FALSE","count:   3<br />type_value: Ice<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(141,217,244,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Ice","legendgroup":"Ice","showlegend":true,"xaxis":"x2","yaxis":"y12","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[95,2],"text":["count:  95<br />type_value: Normal<br />isLegendary: FALSE","count:   2<br />type_value: Normal<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(224,224,224,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Normal","legendgroup":"Normal","showlegend":true,"xaxis":"x3","yaxis":"y13","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[59],"text":"count:  59<br />type_value: Poison<br />isLegendary: FALSE","type":"bar","marker":{"autocolorscale":false,"color":"rgba(18,99,71,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Poison","legendgroup":"Poison","showlegend":true,"xaxis":"x4","yaxis":"y14","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[63,11],"text":["count:  63<br />type_value: Psychic<br />isLegendary: FALSE","count:  11<br />type_value: Psychic<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(74,17,107,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Psychic","legendgroup":"Psychic","showlegend":true,"xaxis":"x5","yaxis":"y15","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[52,3],"text":["count:  52<br />type_value: Rock<br />isLegendary: FALSE","count:   3<br />type_value: Rock<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(51,47,40,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Rock","legendgroup":"Rock","showlegend":true,"xaxis":"x","yaxis":"y16","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[36,5],"text":["count:  36<br />type_value: Steel<br />isLegendary: FALSE","count:   5<br />type_value: Steel<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(186,186,186,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Steel","legendgroup":"Steel","showlegend":true,"xaxis":"x2","yaxis":"y17","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[114,4],"text":["count: 114<br />type_value: Water<br />isLegendary: FALSE","count:   4<br />type_value: Water<br />isLegendary:  TRUE"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(32,59,193,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Water","legendgroup":"Water","showlegend":true,"xaxis":"x3","yaxis":"y18","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":55.4520547945205,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Distribution of legendary pokemons in each type","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,0.170744628278875],"automargin":true,"type":"linear","autorange":false,"range":[0.4,2.6],"tickmode":"array","ticktext":["FALSE","TRUE"],"tickvals":[1,2],"categoryorder":"array","categoryarray":["FALSE","TRUE"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y16","title":"","hoverformat":".2f"},"annotations":[{"text":"Legendary","x":0.5,"y":-0.0471841704718417,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"top","annotationType":"axis"},{"text":"Count","x":-0.0337029789084584,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-90,"xanchor":"right","yanchor":"center","annotationType":"axis"},{"text":"Bug","x":0.0853723141394374,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Dark","x":0.3,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Dragon","x":0.5,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Electric","x":0.7,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Fairy","x":0.914627685860563,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Fighting","x":0.0853723141394374,"y":0.710426179604262,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Fire","x":0.3,"y":0.710426179604262,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Flying","x":0.5,"y":0.710426179604262,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Ghost","x":0.7,"y":0.710426179604262,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Grass","x":0.914627685860563,"y":0.710426179604262,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Ground","x":0.0853723141394374,"y":0.460426179604262,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Ice","x":0.3,"y":0.460426179604262,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Normal","x":0.5,"y":0.460426179604262,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Poison","x":0.7,"y":0.460426179604262,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Psychic","x":0.914627685860563,"y":0.460426179604262,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Rock","x":0.0853723141394374,"y":0.210426179604262,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Steel","x":0.3,"y":0.210426179604262,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Water","x":0.5,"y":0.210426179604262,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"yaxis":{"domain":[0.789573820395738,1],"automargin":true,"type":"linear","autorange":false,"range":[-3.3,69.3],"tickmode":"array","ticktext":["0","20","40","60"],"tickvals":[0,20,40,60],"categoryorder":"array","categoryarray":["0","20","40","60"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.170744628278875,"y0":0.789573820395738,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.170744628278875,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.229255371721125,"x1":0.370744628278875,"y0":0.789573820395738,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.229255371721125,"x1":0.370744628278875,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.429255371721125,"x1":0.570744628278875,"y0":0.789573820395738,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.429255371721125,"x1":0.570744628278875,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.629255371721125,"x1":0.770744628278875,"y0":0.789573820395738,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.629255371721125,"x1":0.770744628278875,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.829255371721125,"x1":1,"y0":0.789573820395738,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.829255371721125,"x1":1,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.170744628278875,"y0":0.539573820395738,"y1":0.710426179604262},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.170744628278875,"y0":0,"y1":23.37899543379,"yanchor":0.710426179604262,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.229255371721125,"x1":0.370744628278875,"y0":0.539573820395738,"y1":0.710426179604262},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.229255371721125,"x1":0.370744628278875,"y0":0,"y1":23.37899543379,"yanchor":0.710426179604262,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.429255371721125,"x1":0.570744628278875,"y0":0.539573820395738,"y1":0.710426179604262},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.429255371721125,"x1":0.570744628278875,"y0":0,"y1":23.37899543379,"yanchor":0.710426179604262,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.629255371721125,"x1":0.770744628278875,"y0":0.539573820395738,"y1":0.710426179604262},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.629255371721125,"x1":0.770744628278875,"y0":0,"y1":23.37899543379,"yanchor":0.710426179604262,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.829255371721125,"x1":1,"y0":0.539573820395738,"y1":0.710426179604262},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.829255371721125,"x1":1,"y0":0,"y1":23.37899543379,"yanchor":0.710426179604262,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.170744628278875,"y0":0.289573820395738,"y1":0.460426179604262},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.170744628278875,"y0":0,"y1":23.37899543379,"yanchor":0.460426179604262,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.229255371721125,"x1":0.370744628278875,"y0":0.289573820395738,"y1":0.460426179604262},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.229255371721125,"x1":0.370744628278875,"y0":0,"y1":23.37899543379,"yanchor":0.460426179604262,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.429255371721125,"x1":0.570744628278875,"y0":0.289573820395738,"y1":0.460426179604262},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.429255371721125,"x1":0.570744628278875,"y0":0,"y1":23.37899543379,"yanchor":0.460426179604262,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.629255371721125,"x1":0.770744628278875,"y0":0.289573820395738,"y1":0.460426179604262},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.629255371721125,"x1":0.770744628278875,"y0":0,"y1":23.37899543379,"yanchor":0.460426179604262,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.829255371721125,"x1":1,"y0":0.289573820395738,"y1":0.460426179604262},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.829255371721125,"x1":1,"y0":0,"y1":23.37899543379,"yanchor":0.460426179604262,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.170744628278875,"y0":0,"y1":0.210426179604262},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.170744628278875,"y0":0,"y1":23.37899543379,"yanchor":0.210426179604262,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.229255371721125,"x1":0.370744628278875,"y0":0,"y1":0.210426179604262},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.229255371721125,"x1":0.370744628278875,"y0":0,"y1":23.37899543379,"yanchor":0.210426179604262,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.429255371721125,"x1":0.570744628278875,"y0":0,"y1":0.210426179604262},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.429255371721125,"x1":0.570744628278875,"y0":0,"y1":23.37899543379,"yanchor":0.210426179604262,"ysizemode":"pixel"}],"xaxis2":{"type":"linear","autorange":false,"range":[0.4,2.6],"tickmode":"array","ticktext":["FALSE","TRUE"],"tickvals":[1,2],"categoryorder":"array","categoryarray":["FALSE","TRUE"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.229255371721125,0.370744628278875],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y17","title":"","hoverformat":".2f"},"yaxis2":{"type":"linear","autorange":false,"range":[-2.1,44.1],"tickmode":"array","ticktext":["0","10","20","30","40"],"tickvals":[0,10,20,30,40],"categoryorder":"array","categoryarray":["0","10","20","30","40"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.789573820395738,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"xaxis3":{"type":"linear","autorange":false,"range":[0.4,2.6],"tickmode":"array","ticktext":["FALSE","TRUE"],"tickvals":[1,2],"categoryorder":"array","categoryarray":["FALSE","TRUE"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.429255371721125,0.570744628278875],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y18","title":"","hoverformat":".2f"},"yaxis3":{"type":"linear","autorange":false,"range":[-1.4,29.4],"tickmode":"array","ticktext":["0","10","20"],"tickvals":[0,10,20],"categoryorder":"array","categoryarray":["0","10","20"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.789573820395738,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x3","title":"","hoverformat":".2f"},"xaxis4":{"type":"linear","autorange":false,"range":[0.4,2.6],"tickmode":"array","ticktext":["FALSE","TRUE"],"tickvals":[1,2],"categoryorder":"array","categoryarray":["FALSE","TRUE"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.629255371721125,0.770744628278875],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y14","title":"","hoverformat":".2f"},"yaxis4":{"type":"linear","autorange":false,"range":[-1.9,39.9],"tickmode":"array","ticktext":["0","10","20","30"],"tickvals":[0,10,20,30],"categoryorder":"array","categoryarray":["0","10","20","30"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.789573820395738,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x4","title":"","hoverformat":".2f"},"xaxis5":{"type":"linear","autorange":false,"range":[0.4,2.6],"tickmode":"array","ticktext":["FALSE","TRUE"],"tickvals":[1,2],"categoryorder":"array","categoryarray":["FALSE","TRUE"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.829255371721125,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y15","title":"","hoverformat":".2f"},"yaxis5":{"type":"linear","autorange":false,"range":[-1.65,34.65],"tickmode":"array","ticktext":["0","10","20","30"],"tickvals":[0,10,20,30],"categoryorder":"array","categoryarray":["0","10","20","30"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.789573820395738,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x5","title":"","hoverformat":".2f"},"yaxis6":{"type":"linear","autorange":false,"range":[-2.05,43.05],"tickmode":"array","ticktext":["0","10","20","30","40"],"tickvals":[0,10,20,30,40],"categoryorder":"array","categoryarray":["0","10","20","30","40"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.539573820395738,0.710426179604262],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis7":{"type":"linear","autorange":false,"range":[-2.45,51.45],"tickmode":"array","ticktext":["0","10","20","30","40","50"],"tickvals":[0,10,20,30,40,50],"categoryorder":"array","categoryarray":["0","10","20","30","40","50"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.539573820395738,0.710426179604262],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"yaxis8":{"type":"linear","autorange":false,"range":[-4,84],"tickmode":"array","ticktext":["0","20","40","60","80"],"tickvals":[0,20,40,60,80],"categoryorder":"array","categoryarray":["0","20","40","60","80"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.539573820395738,0.710426179604262],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x3","title":"","hoverformat":".2f"},"yaxis9":{"type":"linear","autorange":false,"range":[-1.65,34.65],"tickmode":"array","ticktext":["0","10","20","30"],"tickvals":[0,10,20,30],"categoryorder":"array","categoryarray":["0","10","20","30"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.539573820395738,0.710426179604262],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x4","title":"","hoverformat":".2f"},"yaxis10":{"type":"linear","autorange":false,"range":[-4.1,86.1],"tickmode":"array","ticktext":["0","20","40","60","80"],"tickvals":[0,20,40,60,80],"categoryorder":"array","categoryarray":["0","20","40","60","80"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.539573820395738,0.710426179604262],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x5","title":"","hoverformat":".2f"},"yaxis11":{"type":"linear","autorange":false,"range":[-2.85,59.85],"tickmode":"array","ticktext":["0","20","40"],"tickvals":[0,20,40],"categoryorder":"array","categoryarray":["0","20","40"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.289573820395738,0.460426179604262],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis12":{"type":"linear","autorange":false,"range":[-1.5,31.5],"tickmode":"array","ticktext":["0","10","20","30"],"tickvals":[0,10,20,30],"categoryorder":"array","categoryarray":["0","10","20","30"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.289573820395738,0.460426179604262],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"yaxis13":{"type":"linear","autorange":false,"range":[-4.75,99.75],"tickmode":"array","ticktext":["0","25","50","75"],"tickvals":[0,25,50,75],"categoryorder":"array","categoryarray":["0","25","50","75"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.289573820395738,0.460426179604262],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x3","title":"","hoverformat":".2f"},"yaxis14":{"type":"linear","autorange":false,"range":[-2.95,61.95],"tickmode":"array","ticktext":["0","20","40","60"],"tickvals":[0,20,40,60],"categoryorder":"array","categoryarray":["0","20","40","60"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.289573820395738,0.460426179604262],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x4","title":"","hoverformat":".2f"},"yaxis15":{"type":"linear","autorange":false,"range":[-3.15,66.15],"tickmode":"array","ticktext":["0","20","40","60"],"tickvals":[-4.44089209850063e-16,20,40,60],"categoryorder":"array","categoryarray":["0","20","40","60"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.289573820395738,0.460426179604262],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x5","title":"","hoverformat":".2f"},"yaxis16":{"type":"linear","autorange":false,"range":[-2.6,54.6],"tickmode":"array","ticktext":["0","10","20","30","40","50"],"tickvals":[0,10,20,30,40,50],"categoryorder":"array","categoryarray":["0","10","20","30","40","50"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.210426179604262],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis17":{"type":"linear","autorange":false,"range":[-1.8,37.8],"tickmode":"array","ticktext":["0","10","20","30"],"tickvals":[0,10,20,30],"categoryorder":"array","categoryarray":["0","10","20","30"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.210426179604262],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"yaxis18":{"type":"linear","autorange":false,"range":[-5.7,119.7],"tickmode":"array","ticktext":["0","30","60","90"],"tickvals":[0,30,60,90],"categoryorder":"array","categoryarray":["0","30","60","90"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.210426179604262],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x3","title":"","hoverformat":".2f"},"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":1},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"6c415a3d5b74":{"fill":{},"x":{},"type":"bar"}},"cur_data":"6c415a3d5b74","visdat":{"6c415a3d5b74":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Based on the graph above, we see that the Psychic type has the most legendary pokemons. The next types with the most legendary pokemons are the Dragon and Flying Type. However, the reason why the Flying type has the same number of legendary pokemons as Dragon type could be the problem our cleaning method results: usually dragon pokemons may also have a second type of Flying.</p>
</div>
<div id="power-of-legendary-pokemons" class="section level3">
<h3>Power of legendary pokemons</h3>
<p>After analyzing the number of legendary pokemons, we could begin our analysis on their strength.</p>
<pre class="r"><code>pokemon_df%&gt;%ggplot(aes(x = Generation, y = Total, fill = isLegendary))+geom_boxplot(position = &quot;dodge&quot;)+ scale_fill_brewer(palette = &quot;Paired&quot;)+labs(y = &quot;Overall Ability&quot;, title = &quot;Overall ability of pokemons in each generation&quot;, fill = &quot;Legendary&quot;)</code></pre>
<p><img src="/post/2020-09-09-legendary-pokemon_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>We could further see the strength distribution for different types with the help of a boxplot.</p>
<pre class="r"><code>pokemon_df%&gt;%ggplot(aes(x = Total, y = reorder(type_value, Total), fill = isLegendary))+geom_boxplot(alpha =.6)+ scale_fill_brewer(palette = &quot;Paired&quot;)+labs(x = &quot;Overall Ability&quot;, y =&quot;Type&quot;, title = &quot;Overall ability of pokemons in each type&quot;, fill = &quot;Legendary&quot;)</code></pre>
<p><img src="/post/2020-09-09-legendary-pokemon_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Based on the two graphs above, we could see that legendary pokemons always have a higher total ability stats than non-legendary pokemons regardless of the generation or type, which confirms our initial assumption once again.</p>
<p>In fact, relating to the graph about the number of different types, we may guess that it could be the strength of a single type that limits the population of pokemons of that type. This kind of design would balance the fairness of the game.</p>
<p>In addition, we see that from the first graph that on average, the second and fourth generation have the strongest pokemons. Similarly, from the second graph, legendary normal and legendary dragon pokemons are stronger. To a lot of people’s surprise, legendary dragon type pokemons may not be the strongest pokemons out there (in our case, the normal type legendary pokemons are the strongest one).</p>
</div>
<div id="color-for-legendary-pokemons" class="section level3">
<h3>Color for legendary pokemons</h3>
<p>In addition, we can study the color distribution for legendary pokemons.</p>
<pre class="r"><code>pokemon_df%&gt;%ggplot(aes(x = Color, fill = isLegendary))+geom_bar(position = &quot;dodge&quot;)+ scale_fill_brewer(palette = &quot;Paired&quot;)+labs( title = &quot;Distribution of color for pokemons&quot;, fill = &quot;Legendary&quot;)</code></pre>
<p><img src="/post/2020-09-09-legendary-pokemon_files/figure-html/unnamed-chunk-9-1.png" width="672" />
From this graph, we could see that there are more legendary pokemons with certain colors than the others, but it could also be the case that certain colors already have more pokemons than the others. Thus, we need to compare the proportion.</p>
<pre class="r"><code>pokemon_color_leg&lt;-pokemon_df%&gt;%count(Color, isLegendary)%&gt;%spread(isLegendary,n)

names(pokemon_color_leg)&lt;-c(&quot;Color&quot;, &quot;False&quot;, &quot;True&quot;)
pokemon_color_leg%&gt;%mutate(prop = True/ (True+False))%&gt;%ggplot(aes(x = reorder(Color, prop), y = prop))+geom_col(color = &quot;white&quot;, fill = &quot;lightblue&quot;)+labs( title = &quot;Legendary and non-legendary pokemons ratio for each color&quot;, x = &quot;Color&quot;)</code></pre>
<p><img src="/post/2020-09-09-legendary-pokemon_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<pre class="r"><code>pokemon_color_leg%&gt;%mutate(legend_prop = True/sum(True))%&gt;%ggplot(aes(x = reorder(Color, legend_prop), y = legend_prop))+geom_col(color = &quot;white&quot;, fill = &quot;lightblue&quot;)+labs( title = &quot;Proportion of color within legendary pokemons&quot;, x =&quot;Color&quot;)</code></pre>
<p><img src="/post/2020-09-09-legendary-pokemon_files/figure-html/unnamed-chunk-10-2.png" width="672" /></p>
<p>Now we see that the top three colors with the highest legendary pokemon ratio are red, white, black, and yellow. Moreover, red, yellow, and blue are the top colors legendary pokemons tend to have. Notice the difference between the two graph is that for the first graph, the proportion is the ratio between legendary and non-legendary pokemons for each color; for the second graph, we only look at legendary pokemons and study the proportion of each color.</p>
</div>
<div id="physical-features-for-legendary-pokemon" class="section level3">
<h3>Physical features for legendary pokemon</h3>
<p>Finally, we could study the physical features such as height and weight of legendary pokemons. We first look at the height distribution for different types.</p>
<pre class="r"><code>pokemon_df%&gt;%ggplot(aes(x = Height_m, y = reorder(type_value, Height_m)))+geom_boxplot()+labs( title = &quot;Height distribution for pokemons of different types&quot;, x = &quot;Height (m)&quot;,  y = &quot;Type&quot;)</code></pre>
<p><img src="/post/2020-09-09-legendary-pokemon_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>We then turn to their weight.</p>
<pre class="r"><code>pokemon_df%&gt;%ggplot(aes(x = Weight_kg, y = reorder(type_value, Weight_kg)))+geom_boxplot()+labs( title = &quot;Weight distribution for pokemons of different types&quot;, x = &quot;weight (kg)&quot;,  y = &quot;Type&quot;)</code></pre>
<p><img src="/post/2020-09-09-legendary-pokemon_files/figure-html/unnamed-chunk-12-1.png" width="672" />
Based on these two graphs, we see that Dragon, Steel, Ice, and Ground are both the heaviest and tallest types of pokemons.</p>
<p>In order to take both the height and the weight into consideration, we would create a column of BMI for the pokemons.</p>
<pre class="r"><code>pokemon_df&lt;-pokemon_df%&gt;%mutate(BMI = Weight_kg/(Height_m*Height_m))</code></pre>
<pre class="r"><code>pokemon_df%&gt;%ggplot(aes(x = BMI, y = reorder(type_value, BMI), fill = isLegendary))+geom_boxplot(alpha = .6)+ scale_fill_brewer(palette = &quot;Paired&quot;)+labs( title = &quot;BMI distribution for pokemons of different types&quot;, x = &quot;BMI&quot;,  y = &quot;Type&quot;, fill = &quot;Legendary&quot;)</code></pre>
<p><img src="/post/2020-09-09-legendary-pokemon_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>We see that for some of the types, the legendary pokemons have a smaller BMI than those non-legendary pokemons, which might help us to distinguish between them.</p>
</div>
</div>
<div id="classification-models" class="section level2">
<h2>Classification models</h2>
<div id="set-up-the-models" class="section level3">
<h3>Set up the models</h3>
<p>Now we begin to build our model. First, we need to split our data into training and testing data. The reason why we created a bootstraps object is because we are going to use it to compare the performance of the four models.</p>
<pre class="r"><code>set.seed(234)
pokemon_df_2&lt;-pokemon_df%&gt;%mutate(type = type_value)%&gt;%select(-Name,-Weight_kg, -Height_m, -type_value,-Pr_Male,-Body_Style)%&gt;%mutate_if(is.logical, factor)%&gt;%mutate_if(is.character, factor)%&gt;%na.omit()

pokemon_split &lt;- initial_split(pokemon_df_2)

pokemon_train &lt;- training(pokemon_split)
pokemon_testing &lt;- testing(pokemon_split)

pokemon_boot &lt;- bootstraps(pokemon_train)</code></pre>
<p>Next, we set up the recipe. In the pre-processing part, for all nominal variables (except the outcome), we creates dummy variables. In this way, all the predictors would have numerical values. We also used SMOTE to remedy our imbalanced dataset since there are only a few legendary pokemons out there.</p>
<pre class="r"><code>## set up the recipe

library(themis)</code></pre>
<pre><code>## Warning: package &#39;themis&#39; was built under R version 4.0.2</code></pre>
<pre><code>## Registered S3 methods overwritten by &#39;themis&#39;:
##   method               from   
##   bake.step_downsample recipes
##   bake.step_upsample   recipes
##   prep.step_downsample recipes
##   prep.step_upsample   recipes
##   tidy.step_downsample recipes
##   tidy.step_upsample   recipes</code></pre>
<pre><code>## 
## Attaching package: &#39;themis&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:recipes&#39;:
## 
##     step_downsample, step_upsample, tunable.step_downsample,
##     tunable.step_upsample</code></pre>
<pre class="r"><code>pokemon_recipe&lt;-recipe(isLegendary~., pokemon_train)%&gt;%step_dummy(all_nominal(),-all_outcomes())%&gt;%step_corr(all_predictors())%&gt;%step_zv(all_predictors())%&gt;%step_normalize(all_predictors())%&gt;%step_smote(isLegendary)

prep(pokemon_recipe)%&gt;%juice()</code></pre>
<pre><code>## # A tibble: 1,490 x 43
##    Number  Total     HP Attack Defense Sp_Atk Sp_Def  Speed Catch_Rate    BMI
##     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;
##  1  -1.76 -0.178 -0.372 -0.500  -0.334  0.355  0.383 -0.219     -0.691 -0.633
##  2  -1.76  0.913  0.406  0.189   0.322  1.04   1.13   0.513     -0.691 -0.377
##  3  -1.75 -0.178 -0.450 -0.431  -0.498  0.355 -0.177  0.513     -0.691 -0.572
##  4  -1.74  0.995  0.328  0.258   0.158  1.34   0.570  1.25      -0.691 -0.230
##  5  -1.74 -1.01  -0.994 -0.982  -0.268 -0.668 -0.214 -0.842     -0.691 -0.156
##  6  -1.73 -0.178 -0.411 -0.465   0.224 -0.156  0.383 -0.293     -0.691 -0.417
##  7  -1.72 -2.09  -0.955 -1.60   -1.25  -1.69  -1.86  -0.768      2.08  -0.210
##  8  -1.72 -2.00  -0.761 -1.95   -0.596 -1.52  -1.67  -1.32       0.299 -0.491
##  9  -1.71 -0.269 -0.372 -1.09   -0.761  0.696  0.383  0.147     -0.691 -0.328
## 10  -1.71 -2.09  -1.15  -1.43   -1.42  -1.69  -1.86  -0.585      2.08  -0.135
## # … with 1,480 more rows, and 33 more variables: isLegendary &lt;fct&gt;,
## #   Generation_X2 &lt;dbl&gt;, Generation_X3 &lt;dbl&gt;, Generation_X4 &lt;dbl&gt;,
## #   Generation_X5 &lt;dbl&gt;, Generation_X6 &lt;dbl&gt;, Color_Blue &lt;dbl&gt;,
## #   Color_Brown &lt;dbl&gt;, Color_Green &lt;dbl&gt;, Color_Grey &lt;dbl&gt;, Color_Pink &lt;dbl&gt;,
## #   Color_Purple &lt;dbl&gt;, Color_Red &lt;dbl&gt;, Color_White &lt;dbl&gt;, Color_Yellow &lt;dbl&gt;,
## #   hasGender_TRUE. &lt;dbl&gt;, type_Dark &lt;dbl&gt;, type_Dragon &lt;dbl&gt;,
## #   type_Electric &lt;dbl&gt;, type_Fairy &lt;dbl&gt;, type_Fighting &lt;dbl&gt;,
## #   type_Fire &lt;dbl&gt;, type_Flying &lt;dbl&gt;, type_Ghost &lt;dbl&gt;, type_Grass &lt;dbl&gt;,
## #   type_Ground &lt;dbl&gt;, type_Ice &lt;dbl&gt;, type_Normal &lt;dbl&gt;, type_Poison &lt;dbl&gt;,
## #   type_Psychic &lt;dbl&gt;, type_Rock &lt;dbl&gt;, type_Steel &lt;dbl&gt;, type_Water &lt;dbl&gt;</code></pre>
<pre class="r"><code>test_proc&lt;-bake(prep(pokemon_recipe), new_data = pokemon_testing)</code></pre>
<p>Then, we set up the models. In this project, we will use for models: logistic regression, random forrest, nearest neighbor, and decision tree model.</p>
<pre class="r"><code>## set up the model
glr_model &lt;- logistic_reg()%&gt;%set_engine(&quot;glm&quot;) 

rf_model &lt;- rand_forest()%&gt;%set_mode(&quot;classification&quot;)%&gt;%set_engine(&quot;ranger&quot;)

nn_model &lt;- nearest_neighbor()%&gt;%set_mode(&quot;classification&quot;)%&gt;%set_engine(&quot;kknn&quot;)

tree_model &lt;- decision_tree()%&gt;%set_mode(&quot;classification&quot;)%&gt;%set_engine(&quot;rpart&quot;)</code></pre>
<p>After specifying the models, we can combine them with the recipe to create workflow for each model.</p>
<pre class="r"><code>glr_wf &lt;- workflow()%&gt;%add_recipe(pokemon_recipe)%&gt;%add_model(glr_model)

rf_wf&lt;-workflow()%&gt;%add_recipe(pokemon_recipe)%&gt;%add_model(rf_model)

nn_wf&lt;-workflow()%&gt;%add_recipe(pokemon_recipe)%&gt;%add_model(nn_model)

tree_wf&lt;-workflow()%&gt;%add_recipe(pokemon_recipe)%&gt;%add_model(tree_model)</code></pre>
<p>Now we are ready to apply the workflows to our bootstraps object.</p>
<pre class="r"><code>glr_resample &lt;- glr_wf%&gt;%fit_resamples(resamples = pokemon_boot, control = control_resamples(save_pred = TRUE, verbose = TRUE)) 

rf_resample &lt;- rf_wf%&gt;%fit_resamples(resamples = pokemon_boot, control = control_resamples(save_pred = TRUE, verbose = TRUE)) 

nn_resample &lt;- nn_wf%&gt;%fit_resamples(resamples = pokemon_boot, control = control_resamples(save_pred = TRUE, verbose = TRUE)) 

tree_resample &lt;- tree_wf%&gt;%fit_resamples(resamples = pokemon_boot, control = control_resamples(save_pred = TRUE, verbose = TRUE)) </code></pre>
</div>
<div id="evaluate-the-models" class="section level3">
<h3>Evaluate the models</h3>
<p>To evaluate the performance of each model, we use the function collect_metrics(). Based on the accuracy and roc_auc metrics, we can see that the random forrest and decision tree models work the best at classification.</p>
<pre class="r"><code>## evaluate the models
glr_resample%&gt;%collect_metrics()</code></pre>
<pre><code>## # A tibble: 2 x 5
##   .metric  .estimator  mean     n std_err
##   &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;
## 1 accuracy binary     0.960    25 0.00193
## 2 roc_auc  binary     0.949    25 0.00798</code></pre>
<pre class="r"><code>rf_resample%&gt;%collect_metrics()</code></pre>
<pre><code>## # A tibble: 2 x 5
##   .metric  .estimator  mean     n  std_err
##   &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;    &lt;dbl&gt;
## 1 accuracy binary     0.988    25 0.00140 
## 2 roc_auc  binary     0.997    25 0.000407</code></pre>
<pre class="r"><code>nn_resample%&gt;%collect_metrics()</code></pre>
<pre><code>## # A tibble: 2 x 5
##   .metric  .estimator  mean     n std_err
##   &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;
## 1 accuracy binary     0.910    25 0.00191
## 2 roc_auc  binary     0.758    25 0.0101</code></pre>
<pre class="r"><code>tree_resample%&gt;%collect_metrics()</code></pre>
<pre><code>## # A tibble: 2 x 5
##   .metric  .estimator  mean     n  std_err
##   &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;    &lt;dbl&gt;
## 1 accuracy binary     0.976    25 0.00138 
## 2 roc_auc  binary     0.987    25 0.000868</code></pre>
<p>We can also visualize the roc curve for each model in the following way.</p>
<pre class="r"><code>prediction_together&lt;-glr_resample%&gt;%collect_predictions()%&gt;%mutate(model = &quot;glr&quot;)%&gt;%bind_rows(rf_resample%&gt;%collect_predictions()%&gt;%mutate(model = &quot;rf&quot;))%&gt;%bind_rows(nn_resample%&gt;%collect_predictions()%&gt;%mutate(model = &quot;nn&quot;))%&gt;%bind_rows(tree_resample%&gt;%collect_predictions()%&gt;%mutate(model = &quot;tree&quot;))

prediction_together%&gt;%group_by(model)%&gt;%roc_curve(isLegendary,.pred_FALSE)%&gt;%autoplot()</code></pre>
<p><img src="/post/2020-09-09-legendary-pokemon_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>Based on the roc auc curve, we are going to use the random forrest model to predict whether a pokemon is legendary or not.</p>
<p>In addition, we can study the confusion matrix.</p>
<pre class="r"><code>rf_resample%&gt;%collect_predictions()%&gt;%conf_mat(isLegendary, .pred_class)</code></pre>
<pre><code>##           Truth
## Prediction FALSE TRUE
##      FALSE  6818   24
##      TRUE     68  570</code></pre>
<pre class="r"><code>rf_resample%&gt;%collect_predictions()%&gt;%ggplot(aes(x = .pred_FALSE, fill = isLegendary))+geom_density()</code></pre>
<p><img src="/post/2020-09-09-legendary-pokemon_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>Since we have decided which model we will use, we need to know more about it by looking at the importance of different variables.</p>
<pre class="r"><code>library(vip)</code></pre>
<pre><code>## Warning: package &#39;vip&#39; was built under R version 4.0.2</code></pre>
<pre><code>## 
## Attaching package: &#39;vip&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:utils&#39;:
## 
##     vi</code></pre>
<pre class="r"><code>rf_model%&gt;%set_engine(&quot;ranger&quot;, importance = &quot;permutation&quot;)%&gt;%fit(isLegendary~., juice(prep(pokemon_recipe)))%&gt;%vip(geom= &quot;point&quot;)</code></pre>
<p><img src="/post/2020-09-09-legendary-pokemon_files/figure-html/unnamed-chunk-24-1.png" width="672" />
From the Variable of Importance (VIP) graph, we see that the top predictors are Total, Catch_Rate, Attach and hasGender.</p>
<p>With this model, we could finally evalute the model by applying the model to testing dataset. From the roc_auc metric, we could see that thte probability of using the trained model to successfully predict the testing data is about 99.89%, which means our model does a really good job at predicting whether a given pokemon is legendary or not.</p>
<pre class="r"><code>set.seed(1235)
rf_fit&lt;-rf_model%&gt;%set_engine(&quot;ranger&quot;, importance = &quot;permutation&quot;)%&gt;%fit(isLegendary~., juice(prep(pokemon_recipe)))

rf_fit%&gt;%predict(test_proc,type = &quot;prob&quot;)%&gt;%mutate(truth = test_proc$isLegendary)%&gt;%roc_auc(truth,.pred_FALSE)</code></pre>
<pre><code>## # A tibble: 1 x 3
##   .metric .estimator .estimate
##   &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
## 1 roc_auc binary         0.999</code></pre>
</div>
</div>
